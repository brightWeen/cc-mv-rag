# Milvus 多路检索验证配置文件

project:
  name: "milvus-rag-validation"
  version: "1.0.0"

# GLM Embedding 配置
glm:
  api_key: "${GLM_API_KEY}"
  model: "embedding-3"
  dimension: 1024
  batch_size: 10

# Milvus 配置
milvus:
  uri: "milvus_lite.db"
  collection_name: "doc_chunks"
  dense_vector_field: "dense_vector"
  sparse_vector_field: "sparse_vector"

# Elasticsearch 配置
elasticsearch:
  host: "localhost"
  port: 9200
  username: ""
  password: ""
  index_name: "doc_chunks"
  verify_certs: false

# OceanBase SeekDB 配置
seekdb:
  # 服务器模式配置（用于 macOS/Windows）
  use_server: true
  host: "localhost"
  port: 2881
  user: "root"
  password: ""
  # GLM Embedding 配置
  use_glm_embedding: true  # true=使用GLM, false=使用内置embedding
  glm_model: "embedding-3"
  # 嵌入式模式配置（仅 Linux，use_server=false 时使用）
  db_path: "seekdb.db"
  collection_name: "doc_chunks"
  embedding_function: "default"

# 文档分块配置
chunking:
  chunk_size: 512
  chunk_overlap: 50
  max_chunks_per_doc: 50
  separator: "\n\n"

# 检索配置
search:
  default_top_k: 10
  dense_search:
    ef: 256
    metric_type: "IP"
  sparse_search:
    drop_ratio: 0.1
    metric_type: "IP"
  hybrid_search:
    fusion_method: "rrf"  # "rrf" or "weighted"
    rrf_k: 60
    dense_weight: 0.5
    sparse_weight: 0.5

# 评估配置
evaluation:
  k_values: [1, 3, 5, 10]
  metrics: ["recall", "precision", "mrr", "ndcg", "map"]

# 日志配置
logging:
  level: "INFO"
  file: "outputs/logs/app.log"
  rotation: "100 MB"
  retention: "7 days"
